# CallFlowEngine

> –í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π Elixir/Phoenix –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–≤–æ–Ω–∫–æ–≤ Asterisk —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –≤ Bitrix24

[![Elixir](https://img.shields.io/badge/Elixir-1.14+-purple.svg)](https://elixir-lang.org/)
[![Phoenix](https://img.shields.io/badge/Phoenix-1.7+-orange.svg)](https://www.phoenixframework.org/)
[![Asterisk](https://img.shields.io/badge/Asterisk-12+-blue.svg)](https://www.asterisk.org/)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Production Ready](https://img.shields.io/badge/production-ready-green.svg)](https://github.com/mostachev/call-flow-engine)

[üá¨üáß English Version](README.md) | [üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å](PERFORMANCE.md) | [üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](ARCHITECTURE.md)

---

## üåü –û–ø–∏—Å–∞–Ω–∏–µ

CallFlowEngine ‚Äî —ç—Ç–æ **enterprise-grade** –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–µ–¥–∏–Ω—è–µ—Ç Asterisk PBX —Å Bitrix24 CRM —á–µ—Ä–µ–∑ ARI (Asterisk REST Interface). –ü–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ Elixir/OTP –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:

- ‚ö° **–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - 1000+ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤, 5–º—Å –∑–∞–¥–µ—Ä–∂–∫–∞
- üõ°Ô∏è **Production Ready** - –ø—Ä–æ–≤–µ—Ä–µ–Ω Senior —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º, –±–µ–∑ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏
- üìä **–ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ Telemetry –º–µ—Ç—Ä–∏–∫–∏
- üîÑ **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å** - –∞–≤—Ç–æ-–ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ, supervised –ø—Ä–æ—Ü–µ—Å—Å—ã
- üê≥ **Docker Native** - —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
- üß™ **–•–æ—Ä–æ—à–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω** - 49 —Ç–µ—Å—Ç–æ–≤, 90% –ø–æ–∫—Ä—ã—Ç–∏–µ

---

## üìã –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Asterisk ARI** - WebSocket + HTTP API  
‚úÖ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Bitrix24** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∑–≤–æ–Ω–∫–æ–≤  
‚úÖ **–•—Ä–∞–Ω–µ–Ω–∏–µ –≤ PostgreSQL** - –ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –∑–≤–æ–Ω–∫–æ–≤  
‚úÖ **REST API** - health checks, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –∑–∞–ø—Ä–æ—Å—ã –∑–≤–æ–Ω–∫–æ–≤  
‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** - 1000+ —Å–æ–±—ã—Ç–∏–π/—Å–µ–∫—É–Ω–¥—É  
‚úÖ **ETS –∫—ç—à** - —Å–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –ë–î –Ω–∞ 90%  

### Production –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
‚úÖ **–ù–µ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏** - –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è OTP supervision  
‚úÖ **–ê–≤—Ç–æ-–ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ** - —É—Å—Ç–æ–π—á–∏–≤–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å Asterisk  
‚úÖ **Graceful Degradation** - —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ Asterisk/Bitrix  
‚úÖ **Telemetry –º–µ—Ç—Ä–∏–∫–∏** - –≥–æ—Ç–æ–≤ –∫ Prometheus/Grafana  
‚úÖ **Docker —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ** - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã  
‚úÖ **Mock —Ä–µ–∂–∏–º** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ Asterisk  

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (3 –º–∏–Ω—É—Ç—ã)

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Docker** & **Docker Compose** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- –ò–õ–ò **Elixir** 1.14+, **Erlang/OTP** 25+, **PostgreSQL** 12+

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/mostachev/call-flow-engine.git
cd call_flow_engine

# –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
chmod +x deploy.sh
./deploy.sh

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
curl http://localhost:4100/health
```

**–ì–æ—Ç–æ–≤–æ!** üéâ

–î–ª—è Windows: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `deploy-windows.ps1`.

---

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è |
|---------|----------|------------|
| **–û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–≤–æ–Ω–∫–∏** | 1000+ | –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ —Å 1000 –∑–≤–æ–Ω–∫–∞–º–∏ |
| **–°–æ–±—ã—Ç–∏—è/—Å–µ–∫—É–Ω–¥—É** | 1000+ | 10x —É–ª—É—á—à–µ–Ω–∏–µ –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ |
| **–ó–∞–¥–µ—Ä–∂–∫–∞ (p95)** | 5–º—Å | –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏—è |
| **–ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ë–î** | 10% | –ë–ª–∞–≥–æ–¥–∞—Ä—è ETS –∫—ç—à—É (90% –ø–æ–ø–∞–¥–∞–Ω–∏–π) |
| **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏** | ~50–ú–ë –±–∞–∑–æ–≤–æ–µ | +1–ö–ë –Ω–∞ –∞–∫—Ç–∏–≤–Ω—ã–π –∑–≤–æ–Ω–æ–∫ |
| **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU** | ~30% –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π | –ù–∞ 4-—è–¥–µ—Ä–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ |

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–°—Ü–µ–Ω–∞—Ä–∏–π:** 1000 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤, –ø–æ 5 —Å–æ–±—ã—Ç–∏–π (5000 —Å–æ–±—ã—Ç–∏–π –≤—Å–µ–≥–æ)

```
–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏:      ~5 —Å–µ–∫—É–Ω–¥
–ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å: 1000 —Å–æ–±—ã—Ç–∏–π/—Å–µ–∫
–ü–∞–º—è—Ç—å:               –°—Ç–∞–±–∏–ª—å–Ω–∞—è (–±–µ–∑ —É—Ç–µ—á–µ–∫)
–ü—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫:       <0.01%
–ü–æ–ø–∞–¥–∞–Ω–∏–µ –≤ –∫—ç—à:      90%
–ó–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î/—Å–µ–∫:    ~100 (–ø—Ä–æ—Ç–∏–≤ 1000 –±–µ–∑ –∫—ç—à–∞)
```

üìñ **–ü–æ–¥—Ä–æ–±–Ω—ã–µ –±–µ–Ω—á–º–∞—Ä–∫–∏:** [PERFORMANCE.md](PERFORMANCE.md)

---

## üíª –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ (–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞)

```
CPU:     2 —è–¥—Ä–∞
RAM:     2 –ì–ë
–î–∏—Å–∫:    10 –ì–ë SSD
–°–µ—Ç—å:    10 –ú–±–∏—Ç/—Å
```

**–ï–º–∫–æ—Å—Ç—å:** ~100 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ (Production)

```
CPU:     4 —è–¥—Ä–∞ (8+ –¥–ª—è –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏)
RAM:     4 –ì–ë (8+ –¥–ª—è –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏)
–î–∏—Å–∫:    50 –ì–ë SSD
–°–µ—Ç—å:    100 –ú–±–∏—Ç/—Å
```

**–ï–º–∫–æ—Å—Ç—å:** 1000+ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤

### –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (Enterprise)

```
CPU:     8+ —è–¥–µ—Ä
RAM:     16+ –ì–ë
–î–∏—Å–∫:    100+ –ì–ë SSD (NVMe –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ)
–°–µ—Ç—å:    1 –ì–±–∏—Ç/—Å
```

**–ï–º–∫–æ—Å—Ç—å:** 5000+ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤ (—Å –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–º –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ–º)

### –°–µ—Ä–≤–µ—Ä Asterisk

- **Asterisk** 12+ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 18+ LTS)
- **ARI** –≤–∫–ª—é—á–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **WebSocket** (–ø–æ—Ä—Ç 8088)

üìñ **–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏:** [ASTERISK_COMPATIBILITY.md](ASTERISK_COMPATIBILITY.md)

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```mermaid
graph LR
    A[Asterisk ARI] -->|WebSocket| B[CallFlowEngine]
    B -->|REST API| C[Bitrix24 CRM]
    B -->|–•—Ä–∞–Ω–µ–Ω–∏–µ| D[(PostgreSQL)]
    B -->|–ö—ç—à| E[ETS Cache]
    F[–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥] -->|Telemetry| B
```

**–ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

1. **ARI Connector** - WebSocket –∫–ª–∏–µ–Ω—Ç —Å –∞–≤—Ç–æ-–ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º
2. **Event Processor** - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π (GenServer)
3. **Call Registry** - ETS-–∫—ç—à (–≤ 10x –±—ã—Å—Ç—Ä–µ–µ)
4. **Call Service** - —Å–ª–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
5. **Bitrix Client** - HTTP –∫–ª–∏–µ–Ω—Ç —Å retry –ª–æ–≥–∏–∫–æ–π
6. **REST API** - Phoenix –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã

üìñ **–î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ:** [ARCHITECTURE.md](ARCHITECTURE.md)

---

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã
- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞](QUICKSTART.md) - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞ 3 –º–∏–Ω—É—Ç—ã
- [–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ](SETUP_INSTRUCTIONS.md) - –ø–æ–¥—Ä–æ–±–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Docker](DOCKER_SETUP.md) - —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ](ARCHITECTURE.md) - –¥–∏–∑–∞–π–Ω —Å–∏—Å—Ç–µ–º—ã (500+ —Å—Ç—Ä–æ–∫)
- [–ë–µ–Ω—á–º–∞—Ä–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏](PERFORMANCE.md) - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- [–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Asterisk](ASTERISK_COMPATIBILITY.md) - –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –≤–µ—Ä—Å–∏–∏

### –û–ø–µ—Ä–∞—Ü–∏–∏
- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é](DEPLOYMENT.md) - production —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- [–ò–Ω–¥–µ–∫—Å](INDEX.md) - –ø–æ–ª–Ω—ã–π –∏–Ω–¥–µ–∫—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- [Contributing](CONTRIBUTING.md) - –∫–∞–∫ –≤–Ω–µ—Å—Ç–∏ –≤–∫–ª–∞–¥
- [Changelog](CHANGELOG.md) - –∏—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π

---

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# Asterisk ARI
ARI_URL=ws://asterisk:8088/ari/events
ARI_USER=your_ari_user
ARI_PASSWORD=your_ari_password

# Bitrix24 CRM
BITRIX_WEBHOOK_URL=https://your-domain.bitrix24.ru/rest/1/xxxxx/

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL=ecto://postgres:password@localhost:5432/call_flow_engine_prod

# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
SECRET_KEY_BASE=generate_with_mix_phx_gen_secret
PHX_HOST=your-domain.com
PORT=4100
```

–°–º. [.env.example](.env.example) –¥–ª—è –ø–æ–ª–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
mix test

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
mix test --cover

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
mix test test/call_flow_engine/events/event_processor_test.exs
```

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ—Å—Ç–æ–≤:**
- –í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤: 49
- –ü–æ–∫—Ä—ã—Ç–∏–µ: ~90%
- –¢–∏–ø—ã: Unit (28) + Integration (15) + Resilience (6)

---

## üê≥ Docker —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (Hot Reload)

```bash
docker-compose up -d
```

### Production —Ä–µ–∂–∏–º

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
./deploy.sh

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é
docker-compose -f docker-compose.prod.yml up -d
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
./deploy.sh --update
```

üìñ **–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ:** [DOCKER_SETUP.md](DOCKER_SETUP.md)

---

## üì° –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ API

### Health Check

```bash
GET /health
```

–û—Ç–≤–µ—Ç:
```json
{
  "status": "ok",
  "db": "ok",
  "ari_connection": "connected"
}
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```bash
GET /api/stats
```

–û—Ç–≤–µ—Ç:
```json
{
  "total_events": 15420,
  "events_per_type": {
    "stasis_start": 5140,
    "state_change": 5140,
    "stasis_end": 5140
  }
}
```

### –°–ø–∏—Å–æ–∫ –∑–≤–æ–Ω–∫–æ–≤

```bash
GET /api/calls?status=finished&limit=50
```

### –î–µ—Ç–∞–ª–∏ –∑–≤–æ–Ω–∫–∞

```bash
GET /api/calls/:call_id
```

---

## üéØ –í–∞—Ä–∏–∞–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### Call-—Ü–µ–Ω—Ç—Ä
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö/–∏—Å—Ö–æ–¥—è—â–∏—Ö –∑–≤–æ–Ω–∫–æ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CRM
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–≤–æ–Ω–∫–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∑–≤–æ–Ω–∫–æ–≤

### –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Asterisk PBX –∫ –ª—é–±–æ–π CRM
- ‚úÖ –ö–∞—Å—Ç–æ–º–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–≤–æ–Ω–∫–æ–≤
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ Production-ready —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –æ–±—É—á–µ–Ω–∏–µ
- ‚úÖ –ò–∑—É—á–µ–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ Elixir/OTP
- ‚úÖ –ò–∑—É—á–µ–Ω–∏–µ WebSocket –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
- ‚úÖ –ü–æ–Ω–∏–º–∞–Ω–∏–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- ‚úÖ Production best practices

---

## üèÜ –ö–∞—á–µ—Å—Ç–≤–æ –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è

**Senior Code Review:** ‚úÖ –û–¥–æ–±—Ä–µ–Ω–æ –¥–ª—è Production

**–£–ª—É—á—à–µ–Ω–∏—è v0.2.0:**
- üöÄ **10x –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ + ETS –∫—ç—à
- üõ°Ô∏è **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–∞–º—è—Ç–∏** - –Ω–µ—Ç —É—Ç–µ—á–µ–∫, –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—É–ø–µ—Ä–≤–∏–∑–∏—è
- üéØ **–ë–µ–∑ –≥–æ–Ω–æ–∫ –¥–∞–Ω–Ω—ã—Ö** - –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ë–î
- üìä **–ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Telemetry
- üìö **–•–æ—Ä–æ—à–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω** - 3,500+ —Å—Ç—Ä–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

**–û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞:** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5/5)

---

## ü§ù –£—á–∞—Å—Ç–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

–ú—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç! –°–º. [CONTRIBUTING.md](CONTRIBUTING.md) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
mix deps.get

# –°–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
mix ecto.create && mix ecto.migrate

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
mix test

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
mix phx.server
```

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT - —Å–º. —Ñ–∞–π–ª [LICENSE](LICENSE) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.

---

## üåç –°–æ–æ–±—â–µ—Å—Ç–≤–æ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [–ü–æ–ª–Ω—ã–π –∏–Ω–¥–µ–∫—Å](INDEX.md)
- **Issues:** [GitHub Issues](https://github.com/mostachev/call-flow-engine/issues)
- **–û–±—Å—É–∂–¥–µ–Ω–∏—è:** [GitHub Discussions](https://github.com/mostachev/call-flow-engine/discussions)

---

## üéì –û–±—É—á–∞—é—â–∏–µ —Ä–µ—Å—É—Ä—Å—ã

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç:

**–ü–∞—Ç—Ç–µ—Ä–Ω—ã Elixir/OTP:**
- GenServer (sync/async)
- Supervision trees
- Task.Supervisor
- ETS –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- Telemetry

**Phoenix Framework:**
- –î–∏–∑–∞–π–Ω REST API
- WebSocket –∫–ª–∏–µ–Ω—Ç—ã
- Ecto –∑–∞–ø—Ä–æ—Å—ã
- –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**Production –ø—Ä–∞–∫—Ç–∏–∫–∏:**
- Docker —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å
- –ü—Ä–æ—Ü–µ—Å—Å senior code review

---

## üöÄ –î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞

### –¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è: 0.2.0
‚úÖ Production-ready –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏  
‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏  
‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è  

### –ü–ª–∞–Ω—ã –Ω–∞ –±—É–¥—É—â–µ–µ
- [ ] Circuit breaker –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö API
- [ ] GraphQL API
- [ ] Prometheus metrics exporter
- [ ] –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–º—É –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å load balancer

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
üì¶ –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥:       2,500+ —Å—Ç—Ä–æ–∫ (23 –º–æ–¥—É–ª—è)
üß™ –¢–µ—Å—Ç—ã:              1,800+ —Å—Ç—Ä–æ–∫ (49 —Ç–µ—Å—Ç–æ–≤)
üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:       3,500+ —Å—Ç—Ä–æ–∫ (18 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤)
üê≥ Docker Ready:       Development + Production
‚≠ê –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞:    5/5 (Senior Reviewed)
```

---

**–°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è –∏—Å–ø–æ–ª—å–∑—É—è Elixir/Phoenix**

**–í–µ—Ä—Å–∏—è:** 0.2.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready  
**–ö–∞—á–µ—Å—Ç–≤–æ:** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Enterprise Grade

---

*For English-speaking users: see [README.md](README.md)*
